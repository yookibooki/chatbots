<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Launcher</title>
<style>
  :root { --bg:#121212; --tile:#1e1e1e; --gap:16px; --cols:1; --size:64px; }
  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body {
    margin: 0;
    background: var(--bg);
    overflow: hidden;
    display: grid;
    place-items: center;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  #g{
    display: grid;
    gap: var(--gap);
    grid-template-columns: repeat(var(--cols), var(--size));
    grid-auto-rows: var(--size);
  }
  a{
    width: var(--size);
    height: var(--size);
    background: var(--tile);
    border-radius: 16px;
    padding: 15%;
    display: grid;
    place-items: center;
  }
  img{
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    pointer-events: none;
  }
</style>
</head>
<body>
<div id="g"></div>

<script>
(() => {
  const items = [
    ["ChatGPT","https://chatgpt.com/","openai.svg"],
    ["AI Studio","https://aistudio.google.com/prompts/new_chat","aistudio-color.svg"],
    ["Gemini","https://gemini.google.com/app","gemini-color.svg"],
    ["Claude","https://claude.ai/new","claude-color.svg"],
    ["OpenRouter","https://openrouter.ai/chat","openrouter.svg"],
    ["MS Copilot","https://copilot.microsoft.com/","copilot-color.svg"],
    ["GitHub Copilot","https://github.com/copilot","githubcopilot.svg"],
    ["DeepSeek","https://chat.deepseek.com/","deepseek-color.svg"],
    ["Mistral","https://chat.mistral.ai/chat/","mistral-color.svg"],
    ["Qwen","https://chat.qwen.ai/","qwen-color.svg"],
    ["Zhipu","https://chat.z.ai/","zai.svg"],
    ["Together AI","https://chat.together.ai/","together-color.svg"],
    ["Kimi","https://www.kimi.com/","kimi-color.svg"],
    ["Yuanbao","https://yuanbao.tencent.com/","yuanbao-color.svg"],
    ["Doubao","https://www.doubao.com/chat/","doubao-color.svg"],
    ["HuggingChat","https://huggingface.co/chat/","huggingface-color.svg"],
    ["LM Arena","https://lmarena.ai/","lmarena.ico"],
    ["Grok","https://grok.com/","grok.svg"],
    ["Minimax","https://agent.minimax.io/","minimax-color.svg"],
    ["StepFun","https://stepfun.ai/chat/new","stepfun-color.svg"],
  ];

  const g = document.getElementById("g");
  const N = items.length;

  // Build DOM once.
  const frag = document.createDocumentFragment();
  for (let i = 0; i < N; i++) {
    const [name, url, icon] = items[i];
    const a = document.createElement("a");
    a.href = url;
    a.title = name;

    const img = document.createElement("img");
    img.src = "icons/" + icon;
    img.alt = name;
    img.decoding = "async";
    img.loading = "lazy";

    a.appendChild(img);
    frag.appendChild(a);
  }
  g.appendChild(frag);

  const root = document.documentElement;
  const getGap = () => {
    const v = parseFloat(getComputedStyle(root).getPropertyValue("--gap"));
    return Number.isFinite(v) ? v : 0;
  };

  let raf = 0;
  let lastCols = 0, lastSize = 0;

  function layout() {
    raf = 0;
    const W = window.innerWidth;
    const H = window.innerHeight;
    if (W <= 0 || H <= 0) return;

    const gap = getGap();

    let bestCols = 1;
    let bestSize = 0;

    // Brute force is fine at this N and runs only on resize.
    for (let cols = 1; cols <= N; cols++) {
      const rows = (N + cols - 1) / cols | 0; // floor((N+cols-1)/cols)
      const availW = W - (cols - 1) * gap;
      const availH = H - (rows - 1) * gap;
      if (availW <= 0 || availH <= 0) continue;

      const size = (Math.min(availW / cols, availH / rows) | 0);
      if (size > bestSize) { bestSize = size; bestCols = cols; }
    }

    if (bestCols === lastCols && bestSize === lastSize) return;
    lastCols = bestCols; lastSize = bestSize;

    g.style.setProperty("--cols", String(bestCols));
    g.style.setProperty("--size", bestSize + "px");
  }

  function schedule() {
    if (!raf) raf = requestAnimationFrame(layout);
  }

  addEventListener("resize", schedule, { passive: true });
  schedule();
})();
</script>
</body>
</html>
